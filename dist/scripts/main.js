"use strict";var width=20,height=20,frameLength=100,startX=2,startY=2,startLength=80,throughWalls=!0,snakeColour="#2B3E51",SNAKE={};SNAKE.game=function(){function t(){r.clearRect(0,0,width,height),a.advance(),a.check()?n():(a.draw(r),setTimeout(t,frameLength))}function e(){var t={37:"left",38:"up",39:"right",40:"down"};document.onkeydown=function(e){var r=e.which,i=t[r];i?(a.setDirection(i),e.preventDefault()):32===r&&n()}}function n(){var n=document.querySelector("canvas.snake");n.width=width,n.height=height,r=n.getContext("2d"),a=SNAKE.snake(),e(),t()}var r,a;return{init:n}}(),SNAKE.snake=function(){function t(t){var e;switch(s){case"left":case"right":e=["up","down"];break;case"up":case"down":e=["left","right"];break;default:throw"Invalid direction"}e.indexOf(t)>-1?f=t:l=t}function e(t,e){var n=e[0],r=e[1];t.fillRect(n,r,1,1)}function n(t){t.save(),t.fillStyle=snakeColour;for(var n=0;n<o.length;n++)e(t,o[n]);t.restore()}function r(t,e){return(t%e+e)%e}function a(){var t=o[0].slice();switch(s=f,l&&(f=l,l=void 0),s){case"left":t[0]-=1;break;case"up":t[1]-=1;break;case"right":t[0]+=1;break;case"down":t[1]+=1;break;default:throw"Invalid direction"}throughWalls&&(t[0]=r(t[0],width),t[1]=r(t[1],height)),o.unshift(t),o.pop()}function i(t,e){var n=t[0]===e[0]&&t[1]===e[1];return n}function c(t,e){var n=!1;return e.forEach(function(e){i(t,e)&&(n=!0)}),n}function h(){var t=!1,e=o[0],n=o.slice(1,-1),r=e[0],a=e[1];return t=!throughWalls&&0>r||r>=width||0>a||a>=height?!0:t,t=c(e,n)?!0:t}for(var o=[],u=0;startLength>u;u++)o.push([startX,startY-u]);var s="right",f=s,l=f;return{draw:n,advance:a,setDirection:t,check:h}},SNAKE.game.init();